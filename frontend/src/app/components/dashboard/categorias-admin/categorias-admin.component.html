<div class="categorias-container">
  <!-- Panel izquierdo: Formulario -->
  <div class="formulario">
    <!-- BotÃ³n Volver -->
    <button class="btn-volver" type="button" (click)="volverAlDashboard()">
      â† Volver al Dashboard
    </button>

    <h3>{{ editando ? 'Editar CategorÃ­a' : 'Nueva CategorÃ­a' }}</h3>

    <form [formGroup]="formCategoria" (ngSubmit)="guardarCategoria()">
      <!-- Campo nombre -->
      <div class="form-group">
        <label for="nombre">Nombre de la CategorÃ­a:</label>
        <input 
          id="nombre" 
          type="text" 
          formControlName="nombre"
          placeholder="Ej: Espumas" />
      </div>

      <!-- Campo icono -->
      <div class="form-group file-input-wrapper">
        <label for="icono">Ãcono de la CategorÃ­a:</label>
        <input 
          id="icono" 
          type="file"
          accept="image/*"
          (change)="onFileChange($event)" />
        <div class="preview-container" *ngIf="previewUrl">
          <img [src]="previewUrl" alt="Vista previa del Ã­cono" class="preview-img" />
        </div>
      </div>

      <!-- Botones -->
      <button
        type="submit"
        [ngClass]="editando ? 'btn-actualizar' : 'btn-crear'"
        [disabled]="formCategoria.invalid">
        {{ editando ? 'âœ“ Actualizar' : '+ Crear' }}
      </button>

      <button
        type="button"
        class="btn-cancelar"
        *ngIf="editando"
        (click)="cancelarEdicion()">
        âœ• Cancelar
      </button>
    </form>
  </div>

  <!-- Panel derecho: Tabla -->
  <div class="tabla">
    <h3>CategorÃ­as Registradas</h3>

    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Ãcono</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cat of categorias" (click)="seleccionar(cat)">
          <td class="cell-nombre">{{ cat.nombre }}</td>
          <td>
            <img 
              *ngIf="cat.icono_url" 
              [src]="cat.icono_url" 
              [alt]="'Ãcono de ' + cat.nombre"
              class="icono-mini" />
          </td>
          <td>
            <button 
              type="button" 
              class="btn-delete"
              (click)="eliminar(cat.id); $event.stopPropagation()">
              ğŸ—‘ï¸ Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
