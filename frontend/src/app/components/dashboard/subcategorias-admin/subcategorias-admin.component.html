<div class="subcategorias-container">
  <!-- Panel izquierdo: Formulario -->
  <div class="formulario">
    <!-- Bot√≥n Volver -->
    <button class="btn-volver" type="button" (click)="volverAlDashboard()">
      ‚Üê Volver al Dashboard
    </button>

    <h3>{{ editando ? 'Editar Subcategor√≠a' : 'Nueva Subcategor√≠a' }}</h3>

    <form [formGroup]="formSubcategoria" (ngSubmit)="guardarSubcategoria()">
      <!-- Campo nombre -->
      <div class="form-group">
        <label for="nombre">Nombre de la Subcategor√≠a:</label>
        <input 
          id="nombre" 
          type="text" 
          formControlName="nombre"
          placeholder="Ej: Espuma R√≠gida" />
      </div>

      <!-- Campo categor√≠a -->
      <div class="form-group">
        <label for="categoria_id">Categor√≠a Padre:</label>
        <select id="categoria_id" formControlName="categoria_id">
          <option value="" disabled>Selecciona una categor√≠a</option>
          <option *ngFor="let cat of categorias" [value]="cat.id">
            {{ cat.nombre }}
          </option>
        </select>
      </div>

      <!-- Botones -->
      <button
        type="submit"
        [ngClass]="editando ? 'btn-actualizar' : 'btn-crear'"
        [disabled]="formSubcategoria.invalid">
        {{ editando ? '‚úì Actualizar' : '+ Crear' }}
      </button>

      <button
        type="button"
        class="btn-cancelar"
        *ngIf="editando"
        (click)="cancelarEdicion()">
        ‚úï Cancelar
      </button>
    </form>
  </div>

  <!-- Panel derecho: Tabla -->
  <div class="tabla">
    <h3>Subcategor√≠as Registradas</h3>

    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Categor√≠a</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let sub of paginatedSubcategorias" (click)="seleccionar(sub)">
          <td class="cell-nombre">{{ sub.nombre }}</td>
          <td>
            <span class="cell-subcategoria">{{ obtenerNombreCategoria(sub.categoria_id) }}</span>
          </td>
          <td>
            <button 
              type="button" 
              class="btn-delete"
              (click)="eliminar(sub.id); $event.stopPropagation()">
              üóëÔ∏è Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- üìÑ Paginaci√≥n -->
    <div class="pagination-container">
      <div class="pagination-info">
        Mostrando {{ (currentPage - 1) * pageSize + 1 }} - {{ Math.min(currentPage * pageSize, totalSubcategorias) }} de {{ totalSubcategorias }} subcategor√≠as
      </div>

      <div class="pagination-controls">
        <button 
          (click)="irAPaginaAnterior()" 
          [disabled]="currentPage === 1"
          class="btn-pagination btn-prev"
          title="P√°gina anterior">
          ‚Üê Anterior
        </button>

        <div class="page-numbers">
          <button 
            *ngFor="let page of [].constructor(totalPages); let i = index"
            (click)="cambiarPagina(i + 1)"
            [class.active]="currentPage === i + 1"
            class="btn-page-number">
            {{ i + 1 }}
          </button>
        </div>

        <button 
          (click)="irAPaginaSiguiente()" 
          [disabled]="currentPage === totalPages"
          class="btn-pagination btn-next"
          title="P√°gina siguiente">
          Siguiente ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>
